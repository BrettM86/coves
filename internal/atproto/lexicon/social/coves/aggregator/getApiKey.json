{
  "lexicon": 1,
  "id": "social.coves.aggregator.getApiKey",
  "defs": {
    "main": {
      "type": "query",
      "description": "Get information about the authenticated aggregator's API key. Note: The actual key value is NEVER returned - only metadata about the key.",
      "parameters": {
        "type": "params",
        "description": "No parameters required. Returns key info for the authenticated aggregator.",
        "properties": {}
      },
      "output": {
        "encoding": "application/json",
        "schema": {
          "type": "object",
          "required": ["hasKey"],
          "properties": {
            "hasKey": {
              "type": "boolean",
              "description": "Whether the aggregator has an API key (active or revoked)"
            },
            "keyInfo": {
              "type": "ref",
              "ref": "social.coves.aggregator.defs#apiKeyView",
              "description": "API key metadata. Only present if hasKey is true."
            }
          }
        }
      },
      "errors": [
        {
          "name": "AuthenticationRequired",
          "description": "Authentication is required to get API key info"
        },
        {
          "name": "AggregatorRequired",
          "description": "Only registered aggregators can get API key info"
        },
        {
          "name": "AggregatorNotFound",
          "description": "Aggregator not found"
        }
      ]
    }
  }
}
